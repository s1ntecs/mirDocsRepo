---
sidebar_position: 1
title: Прикладная часть
---
Одной из сложностей решения задач при расчете разветвленных сетей является нахождения всех узлов сети, направления потоков, учет не стандартных схем соединения и т.д. Для решения этой задачи в программе использован теоретический инструмент алгоритм топологической сортировки графов далее АТСГ.
Граф – это математическая структура, состоящая из множества вершин (или узлов) и множества рёбер, соединяющих эти вершины.
Граф можно представить как G=(V,E)G = (V, E)G=(V,E), где:
•	VVV – множество вершин.
•	EEE – множество рёбер, каждое из которых соединяет пару вершин.
Графы бывают:
•	Направленные (ориентированные) – рёбра имеют направление (например, (u,v)(u, v)(u,v) означает, что ребро идёт от вершины uuu к вершине vvv).
•	Ненаправленные – рёбра не имеют направления.
•	Взвешенные – каждому ребру соответствует вес или стоимость.
•	Невзвешенные – рёбра не имеют веса.
Топологическая сортировка – это упорядочение вершин направленного ациклического графа (DAG, Directed Acyclic Graph) в линейный порядок так, чтобы для каждого ребра (u,v)(u, v)(u,v) вершина uuu появлялась перед вершиной vvv. АТСГ позволяет определить правильный порядок расчётов в системе трубопроводного транспорта. Представьте, что у вас есть сеть труб, где сырьё движется от источников к потребителям. Чтобы рассчитать материальный баланс, мы должны начать с тех мест, где сырьё поступает, и двигаться дальше по цепочке, пока не дойдём до мест, где оно выходит из системы.
Пример работы алгоритма:
1.	Ищем начальные точки. Начинаем с объектов, откуда поступает сырьё, — это истоки. Они независимы от других объектов, поэтому с них начинается процесс.
2.	Определяем зависимости. Мы понимаем, что расчёт для каждого объекта зависит от объектов, которые находятся "выше" по потоку. Например:
•	- Если "Исток1" подаёт сырьё на "НПС1", то сначала нужно рассчитать "Исток1", а потом "НПС1".
•	- Если "НПС1" подаёт сырьё на "УПС1", то "УПС1" рассчитывается только после "НПС1".

3.	Движемся по цепочке. Алгоритм проходит по всем объектам, начиная с истоков. После истоков рассчитываются насосные станции (НПС), затем узлы подготовки сырья (УПС) и, наконец, конечные точки системы (стоки).

4.	Итоговый порядок. В результате мы получаем список объектов, упорядоченных так, чтобы каждый рассчитывался в правильной последовательности. Например:
•	     - Исток1 → НПС1 → УПС1 → Сток1.
АТСГ позволяет при расчете позволяет учесть все потоки, определить направление потоков. Специальные приемы позволяю моделировать два потока с оного объекта в другой, а также эмитировать рецикл. Визуальный алгоритм расчета схемы представлен на рисунке 2.1

 
Рисунок 2.1 Схема расчета методом топологии графов

АТСГ имеет хорошо позволяет рассчитывать разветвлённые схемы со сложной топологией, однако имеет свои ограничения. В частности потоки не должны замыкаться сами на себя, а также из одного объекта в другой не должно выходить более одного графа. Благодаря внедрению промежуточных объектов данные недостатки метода удалось устранить.
